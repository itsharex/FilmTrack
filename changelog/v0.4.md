# FilmTrack v0.4.0 更新日志

## ✨ 新功能

### 观看时间自定义
- 在添加/编辑记录时可以修改影视的观看(添加)时间
- 解决了之前看过的电影只能添加到最新时间的问题

### 重刷记录系统
- 新增影视重刷次数统计功能
- 记录每次观看的详细时间
- 在影视详情页显示重刷记录列表
- 重刷记录标题旁显示总计次数
- 支持添加、编辑和删除重刷记录

### 评分系统优化
- 重刷记录使用星星评分制，替代原有的输入框
- 添加记录界面的评分会自动同步到观看历史
- 优化评分显示样式，移除数字显示

### 界面布局改进
- 重新设计重刷记录的显示位置和样式
- 优化影视详情页布局
- 修改添加重刷记录弹窗为程序窗口居中显示
- 优化影视库界面查询输入框布局

## 🔧 功能优化

### 排序规则优化
- 优化排序逻辑，提供更合理的影视展示顺序

### 显示规则改进
- 电影在"正在追剧"状态时不显示集数信息
- 电视剧只有一季时不同时显示"第x季"和"整体进度"
- 历史界面不显示观看时分信息
- 优化集数进度显示规则的一致性

### 表单验证
- 添加影视记录时，观看时间设为必填字段
- 改进表单验证逻辑和用户体验

## 🐛 问题修复

### 界面交互修复
- 修复删除记录弹窗中取消按钮无效的问题
- 移除取消按钮，改为点击空白处关闭弹窗
- 修复双滚动条导致的页面抖动现象

### 数据同步修复
- 修复添加观看记录时评分不显示的问题
- 修复编辑影视记录时日期字段更新逻辑
- 解决movie.ts中updateMovie方法调用错误接口的问题

### 样式优化
- 优化重刷记录列表的视觉效果
- 美化编辑和删除按钮样式
- 移除不必要的交互效果

## 🔄 重构改进

### 命名统一
- 将"观看历史"统一改名为"重刷记录"，避免概念混淆
- 更新相关文件名、数据库表名和注释
- 将"这集已看"改为更合适的名称

### 代码优化
- 清理冗余代码和重复定义
- 移除未使用的测试代码
- 改进组件结构和逻辑

### 类型安全性提升
- 减少any类型的使用
- 增加具体的类型定义
- 提高代码类型安全性

## 📝 用户体验改进

### 交互优化
- 改进弹窗显示位置和行为
- 优化空状态显示
- 改进按钮和控件的视觉反馈

### 信息展示
- 移除详情页右下角的"最后观看"信息
- 优化重刷记录的信息展示
- 改进列表排版

**发布日期**: 2025-09-11
**版本号**: v0.4.0

---

> 本版本主要聚焦于重刷记录系统的完善、数据字段的规范化以及用户界面的全面优化，为用户提供更加完整和易用的影视管理体验。